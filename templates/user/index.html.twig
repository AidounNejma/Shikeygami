{% extends 'base.html.twig' %}

{% block stylesheets %}
	{{ parent() }}
	{{ encore_entry_link_tags('user') }}
{% endblock %}

{% block title %}
	Shikeygami | Liste d'utilisateurs
{% endblock %}

{% block body %}
	<div class="content">
		<h2>Liste d'utilisateurs</h2>

		<div>
			<table class="user-table">
				<thead>
					<tr>
						<th>Id</th>
						<th>Informations</th>
						<th>Réduction</th>
						<th>Détails</th>
						<th>Modifier</th>
					</tr>
				</thead>
				<tbody>
					{% for user in users %}
						<tr>
							<td>{{ user.id }}</td>
							<td>
								<p>
									<span>Date d'inscription :</span>
									{{ user.dateOfCreation ? user.dateOfCreation|date('Y-m-d') : '' }}</p>
								<p>
									<span>Pseudo :</span>
									{{ user.username }}</p>
								<p>
									<span>Email :</span>
									{{ user.email }}</p>
								<p>
									<span>Niveau d'accès :</span>
									{{ user.roles ? user.roles|json_encode : '' }}</p>
								<p>
									<span>Nom complet :</span>
									{{ user.firstName }}
									{{ user.lastName }}
								</p>
							</td>
							<td>{{ user.discountStatus }}</td>
							<td>
								<a href="{{ path('user_show', {'id': user.id}) }}">Détails</a>
							</td>
							<td>
								<a href="{{ path('user_edit', {'id': user.id}) }}">Modifier</a>
							</td>
						</tr>
					{% else %}

						<p>Aucun utilisateur n'est présent dans la base de données et ça n'est pas très normal.<br>
							Avez-vous pensez à mettre le site en ligne ?</p>

					{% endfor %}
				</tbody>
			</table>
		</div>
</div>
	{% endblock %}

	{% block javascripts %}
		{{ parent() }}
		{{ encore_entry_script_tags('user') }}
	{% endblock %}
