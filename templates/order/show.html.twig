{% extends 'base.html.twig' %}

{% block stylesheets %}
	{{parent()}}
	{{ encore_entry_link_tags('order') }}
{% endblock %}

{% block javascripts %}
	{{parent()}}
	{{ encore_entry_script_tags('order') }}
{% endblock %}

{% block title %}Shikeygami | Détail de la commande
{% endblock %}

{% block body %}
	<main>
		{% if is_granted('ROLE_ADMIN') %}
			<div class="centered">
				<h2>Détail de la commande</h2>
			</div>
			<div class='content'>

				<table>
					<tbody>
						<tr>
							<th>Id</th>
							<td>{{ order.id }}</td>
						</tr>
						<tr>
							<th>Pseudo de l'utilisateur</th>
							<td>{{ order.user.userName }}</td>
						</tr>
						<tr>
							<th>Date de la commande</th>
							<td>{{ order.dateOfOrder ? order.dateOfOrder|date('d M Y') : '' }}</td>
						</tr>
						<tr>
							<th>Prix total</th>
							<td>{{ order.totalPrice }}</td>
						</tr>
						<tr>
							<th>Status du paiement</th>
							<td>{{ order.paymentStatus }}</td>
						</tr>
					</tbody>
				</table>

				<a href="{{ path('order_index') }}">Retour à la liste</a>

				<a href="{{ path('order_edit', {'id': order.id}) }}">Modifier</a>

				{{ include('order/_delete_form.html.twig') }}
			</div>
		{% elseif app.user.username == order.user.userName %}
				<div class="centered">
					<h2>Détail de la commande</h2>
				</div>
				<div class='content'>

					<table>
						<tbody>
							<tr>
								<th>Id</th>
								<td>{{ order.id }}</td>
							</tr>
							<tr>
								<th>Pseudo de l'utilisateur</th>
								<td>{{ order.user.userName }}</td>
							</tr>
							<tr>
								<th>Date de la commande</th>
								<td>{{ order.dateOfOrder ? order.dateOfOrder|date('d M Y') : '' }}</td>
							</tr>
							<tr>
								<th>Prix total</th>
								<td>{{ order.totalPrice }}</td>
							</tr>
							<tr>
								<th>Status du paiement</th>
								<td>{{ order.paymentStatus }}</td>
							</tr>
						</tbody>
					</table>

					<a href="{{ path('order_index') }}">Retour à la liste</a>

					<a href="{{ path('order_edit', {'id': order.id}) }}">Modifier</a>

					{{ include('order/_delete_form.html.twig') }}
				</div>
			{% elseif app.user.username != order.user.userName %}
				<p>Vous n'avez pas les autorisations nécéssaires pour consulter ces informations</p>
			{% endif %}
		</main>
	{% endblock %}
